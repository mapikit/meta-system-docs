(self.webpackChunkmeta_system_docs=self.webpackChunkmeta_system_docs||[]).push([[3366],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return d},kt:function(){return h}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=i.createContext({}),p=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=p(e.components);return i.createElement(c.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=p(n),h=a,m=u["".concat(c,".").concat(h)]||u[h]||l[h]||o;return n?i.createElement(m,r(r({ref:t},d),{},{components:n})):i.createElement(m,r({ref:t},d))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var p=2;p<o;p++)r[p]=n[p];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2469:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return p},toc:function(){return d},default:function(){return u}});var i=n(2122),a=n(9756),o=(n(7294),n(3905)),r=["components"],s={sidebar_position:3},c="Execution Flows",p={unversionedId:"api-docs/architecture/flows",id:"api-docs/architecture/flows",isDocsHomePage:!1,title:"Execution Flows",description:"What are Flows",source:"@site/docs/api-docs/architecture/flows.md",sourceDirName:"api-docs/architecture",slug:"/api-docs/architecture/flows",permalink:"/meta-system-docs/docs/api-docs/architecture/flows",editUrl:"https://github.com/mapikit/meta-system-docs/edit/main/docs/api-docs/architecture/flows.md",version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docs",previous:{title:"Extending Functionality",permalink:"/meta-system-docs/docs/api-docs/architecture/extending-functionality"},next:{title:"Addons",permalink:"/meta-system-docs/docs/api-docs/architecture/components/addons"}},d=[{value:"What are Flows",id:"what-are-flows",children:[]},{value:"Declaring BOps",id:"declaring-bops",children:[{value:"Dependencies",id:"dependencies",children:[]},{value:"Dependencies During Runtime",id:"dependencies-during-runtime",children:[]}]},{value:"Determining Flow",id:"determining-flow",children:[{value:"Stitching Stage",id:"stitching-stage",children:[]},{value:"Execution Stage",id:"execution-stage",children:[]}]},{value:"BOps Engine: Using Declared BOps",id:"bops-engine-using-declared-bops",children:[{value:"Runtime details",id:"runtime-details",children:[]}]}],l={toc:d};function u(e){var t=e.components,n=(0,a.Z)(e,r);return(0,o.kt)("wrapper",(0,i.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"execution-flows"},"Execution Flows"),(0,o.kt)("h2",{id:"what-are-flows"},"What are Flows"),(0,o.kt)("p",null,"All systems are made of execution flows, tailored to the needs of their use-case. Meta-System provides a framework for planning your flows and reusing common steps in the operation. This is what we call Business Operations, or ",(0,o.kt)("strong",{parentName:"p"},"BOps")," for short."),(0,o.kt)("p",null,'Those operations are composed of small steps called "modules" or "BOps Functions". By chaining them together it is possible to build any functionality a system may perform.'),(0,o.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Glossary Disambiguation")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"By saying ",(0,o.kt)("strong",{parentName:"p"},"BOps"),", we're refferring to the flows. By saying ",(0,o.kt)("strong",{parentName:"p"},"module")," or ",(0,o.kt)("strong",{parentName:"p"},"BOps Function"),', we are talking about each of the said "steps" of a BOps. Finally, ',(0,o.kt)("strong",{parentName:"p"},"BOps Engine"),' is the engine responsible for "compiling" your configuration, ',(0,o.kt)("em",{parentName:"p"},(0,o.kt)("a",{parentName:"em",href:"#bops-engine-using-declared-bops"},"see below")),"."))),(0,o.kt)("h2",{id:"declaring-bops"},"Declaring BOps"),(0,o.kt)("p",null,"When configuring a BOps, each function that needs to be executed in that specific BOp must be specified. This takes place in the property ",(0,o.kt)("a",{parentName:"p",href:"../configuring/bops/bops-configuration"},(0,o.kt)("inlineCode",{parentName:"a"},'"configuration"'))," on your business operation data."),(0,o.kt)("p",null,"For MSYS this property is a list that contains every function, their dependencies, and an ",(0,o.kt)("strong",{parentName:"p"},"attributed key"),". This means that you don't explicitly describe the flow, you declare the BOps Functions that need to be executed, what their input data is, and their ",(0,o.kt)("strong",{parentName:"p"},"functional dependencies"),". ",(0,o.kt)("strong",{parentName:"p"},"This approach makes MSYS conceptually close to ",(0,o.kt)("a",{parentName:"strong",href:"https://en.wikipedia.org/wiki/Functional_programming"},"functional programming")),"."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"The key of a function")," is what Meta-System uses internally to know what function a dependency is refferring to, as it is possible to contain multiple functions with the same body (Eg: A multiplication function), but different dependencies and outputs in the same flow.")),(0,o.kt)("h3",{id:"dependencies"},"Dependencies"),(0,o.kt)("p",null,"Every BOps function may have dependencies bound to them, and each dependency is resolved before the current function is executed."),(0,o.kt)("p",null,"The dependencies can be either ",(0,o.kt)("strong",{parentName:"p"},"functional")," (when the dependency data is not needed, but its execution is required), or ",(0,o.kt)("strong",{parentName:"p"},"normal"),", when the data is required and mapped to the input of the next function."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"It is important to take note that BOps Functions can take functions as parameters too. Meta-System provides a way of passing a module as a parameter by setting ",(0,o.kt)("a",{parentName:"p",href:"../configuring/bops/dependencies/#origin-path"},(0,o.kt)("inlineCode",{parentName:"a"},'"originPath"'))," to ",(0,o.kt)("inlineCode",{parentName:"p"},'"module"'),".")),(0,o.kt)("h3",{id:"dependencies-during-runtime"},"Dependencies During Runtime"),(0,o.kt)("p",null,"Meta-System validates that there are no circular dependencies declarations, for in such case, there is no final point that must be executed first."),(0,o.kt)("p",null,"For example, in a BOps in which there is a function ",(0,o.kt)("inlineCode",{parentName:"p"},"A")," that depends on ",(0,o.kt)("inlineCode",{parentName:"p"},"B"),", which depends on ",(0,o.kt)("inlineCode",{parentName:"p"},"C"),", that depends on ",(0,o.kt)("inlineCode",{parentName:"p"},"A")," again, it is not possible to solve dependencies."),(0,o.kt)("p",null,"On the other hand, in a valid configuration which contains the module ",(0,o.kt)("inlineCode",{parentName:"p"},"A"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"B"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"C"),", and that ",(0,o.kt)("inlineCode",{parentName:"p"},"A")," has a declared dependency on ",(0,o.kt)("inlineCode",{parentName:"p"},"B")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"C"),":"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"B")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"C")," are executed in a sequence that depends on their order in the dependencies list."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"A")," is executed.")),(0,o.kt)("h2",{id:"determining-flow"},"Determining Flow"),(0,o.kt)("p",null,"From the configuration to the execution of the BOps flow, there are two stages: The Stitching stage, when Meta-System turns your configuration in a JS function, and the Execution stage, that is when the produced function is executed."),(0,o.kt)("p",null,"If you're looking for how to configure it, check ",(0,o.kt)("a",{parentName:"p",href:"../configuring/bops/flows"},"this page"),"."),(0,o.kt)("h3",{id:"stitching-stage"},"Stitching Stage"),(0,o.kt)("p",null,"Firstly, Meta-System looks to the ",(0,o.kt)("inlineCode",{parentName:"p"},'"output"')," function, and check its dependencies. For each dependency, this process is repeated: Get the module, find the dependencies, and do the same for them; Until we have all the function structure mapped for the BOps. This looks like we're traversing the flow backwards."),(0,o.kt)("img",{src:"/meta-system-docs/img/docs/stitch-process.png",height:"380px"}),(0,o.kt)("p",null,"The arrows represent the dicovery direction."),(0,o.kt)("p",null,'When the process is done, all the functions and intermediary mappers are "stitched", and you\'re left with a pure javascript function.'),(0,o.kt)("h3",{id:"execution-stage"},"Execution Stage"),(0,o.kt)("p",null,"This stage only happens when the function is called, either manually of from a Protocol. It is the data propagating through each function, and being mapped to the next on the chain until the output, then the final value is returned."),(0,o.kt)("img",{src:"/meta-system-docs/img/docs/execution-process.png",height:"380px"}),(0,o.kt)("p",null,"The arrows represent the data flow direction."),(0,o.kt)("h2",{id:"bops-engine-using-declared-bops"},"BOps Engine: Using Declared BOps"),(0,o.kt)("p",null,"The name of the mechanism behind this feature in Meta-System is called ",(0,o.kt)("strong",{parentName:"p"},"BOps Engine"),". It is responsible for binding the data and functions together, and outputs a single JavaScript function with the interface specified in its configuration."),(0,o.kt)("p",null,"Furthermore, the BOps Engine takes care of transforming the Functions List in the flow to be used by the system. The resulting function contains the modules to be executed in the correct order and conditions."),(0,o.kt)("h3",{id:"runtime-details"},"Runtime details"),(0,o.kt)("p",null,"In order to avoid a single module being executed multiple times in a case where it is a dependency for multiple other functions, Meta-System caches the result of each function. In other words: A function is only executed once, given if that it is a same key being required twice."))}u.isMDXComponent=!0}}]);